sudo: false
language: python
cache: pip
python:
- 3.6
install: make requirements
script: echo "Running tests ..."
stages:
- lint
- test
- name: deploy
  if: branch = master
- notify
jobs:
  include:
  - stage: lint
    script: make lint
  - stage: test
    script: make test
    env:
    - export MONGO="mongokey"
    - export EMAIL_USERNAME="u"
    - export EMAIL_PASSWORD="p"
  - stage: deploy
    script: skip
    deploy:
      provider: heroku
      api_key:
        secure: HB9c7eLOwZlxO6Dc+v5GmB/9oRm9d3fGvsVFqDobnd917mGDNVH8aqevBAeUVU6Eqmrp5Vpr1wLa1+wSTBNdk7bnjAIzNI2feg6AtL6HbhCNlwbDH2dLzh+sgCJ519/tdTieIT2TTScrtUoaggdJJ0oS0qRzemO76NI7nlWyctN0Z+Q12h1HE/gTTue9iD6/Dzag9gO5oFNoUIGDSxsGiyJhjhjrVWE/4ZX37hK4Mn8AQ/Tt75HW5D1SpNkFEp8ioMnfwth8Idv5T71YR1uiCBJQ5Hd01jhFtc7L1cCUBnjFSviCuGO50U2tnw6s6vD5OHvaKYZQ4wdHaST0hCVH9PNEMRKsaQK4UBBB2NZMLPE7+U3PaW4OPAlA7kol62a9eBBfXLuKUQ4VOpv3Mrf5qvQaIVzXSqGjE/0QRH7gJ1yzovAMaGP9mnjOM6mrgCA0hajB680bSoxCjaebAkQAzun2d6/m3jLF+q6l6TpasjMuf+UJvbriPZ5mdsvcMMe9f48/xaPMP6vFJ2OHJHidski/bgYuUc2/W04mN5gi7Nsyuy6GXzNnHb+mzOa1LXpfYof09kG4x0CwnNjXbaQUeMXtLwcK0zrcH0he5jNipX/9L2HnczyWtM9lxxR4K7i7HTrJK26ULlBuq4IR/gNUl/MOAA8hk0hOEGr4nN3yxek=
      app: nisb-events
  - stage: notify
    notifications:
      email: mridul.kepler@gmail.com
